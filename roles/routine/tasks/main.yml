- name: routine package are installed
  become: true
  package:
    state: present
    name:
      - curl
      - tree
      - keepassxc
      - docker
      - docker-compose
      - thunderbird
      - feh
      - sshpass
      - ranger
      - exfat-utils
      - unzip
      - detox
      - profanity
      - pandoc

- name: required packages are installed
  become: true
  package:
    state: present
    name:
      - alsa-utils
      - pulseaudio
      - pulseaudio-alsa
      - openssh
      - ttf-dejavu
      - grim
      - screenfetch
      - virtualbox-host-modules-arch
      - thunderbird-extension-enigmail
      - nextcloud-client

- name: aur packages are installed
  include_tasks: build_package.yml
  loop:
    - name: brave-bin
      path: https://aur.archlinux.org/brave-bin.git
    - name: discord
      path: https://aur.archlinux.org/discord.git
    - name: minecraft
      path: https://aur.archlinux.org/minecraft-launcher.git

- name: user tristan is created
  become: true
  user:
    name: tristan
    groups:
      - docker
      - wheel
    shell: /bin/zsh

- name: directory for vms is created
  become: true
  file:
    path: /var/virtualbox-vms
    state: directory
    owner: tristan
    group: tristan

# TODO : update la conf ssh pour strict host key
